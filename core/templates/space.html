{% extends "base.html" %}

{% block core %}
	<div class="top-bar">
		<div>
			{% if space.parent %}<a href="/{{ space.parent.uid }}" class="btn"><i class="fa fa-chevron-left"></i> {{ space.parent }}</a>{% endif %}
			<a href="" class="btn" id="btnEditSpace"><i class="fa fa-pencil"></i>Edytuj</a>
		</div>
		<div>
			<a href="" class="btn">Zmień uprawnienia</a>
			<a href="" class="btn"><i class="fa fa-plus"></i>przestrzeń</a>
			<a href="" class="btn"><i class="fa fa-plus"></i>kanał</a>
		</div>
	</div>
	<div class="view-space">
		<div class="view-space_current">
			<ul class="breadcrumbs">
			{% for space in space.get_path %}
				<li><a href="/{{ space.uid }}">{{ space.name }}</a><i class="fa fa-chevron-right"></i></li>
			{% endfor %}
			</ul>
			<div class="current-space {% if space.status == 2 %} current-space--archive {% endif %}">
				<div class="current-space_head">
					{% if space.type == 1 %}
						<i class="fa fa-folder-o"></i>
						<div><span class="current-space_type">Przestrzeń</span>
					{% elif space.type == 2 %}
						<i class="fa fa-comments-o"></i>
						<div><span class="current-space_type">Kanał</span>
					{% elif space.type == 3 %}
						<i class="fa fa-comment-o"></i>
						<div><span class="current-space_type">Rozmowa prywatna</span>
					{% else %}
						<div>
					{% endif %}
						<h1>{{ space.name }}</h1>
					</div>
				</div>
			    <p>{{ space.description }}</p>
		    </div>
		    <div class="messages">
				<h2>{% if messages %}Komentarze{% else %}Brak komentarzy{% endif %}</h2>
		    	<div class="messages_list {% if not messages %}messages_list--empty{% endif %}">
		    		{% for message in messages %}
				    	<div class="messages-item">
				    		<strong class="messages-item_user">{{ message.user }}</strong>
				    		<span class="messages-item_date">{{ message.data }}</span>
				    		<p>
				    			{{ message.content }}
				    		</p>
				    	</div>
		    		{% endfor %}
			    </div>
		    	<div class="messages_form" id="messageForm">
	    			{% include "forms/form_new_message.html" %}
		    	</div>
		    </div>
		</div>
		<div class="view-space_subspaces">
			<h2>Podprzestrzenie</h2>
			<div class="list-space">
			    {% if own_spaces %}
			        {% for space in own_spaces %}
						<a href="/{{ space.uid }}" class="list-space_item {% if space.status == 2 %}list-space_item--archive{% endif %}">{{ space.name }}</a>
			        {% endfor %}
			    {% else %}
					Brak
				{% endif %}
			</div>
			<div class="list-space list-space--other">
				{% if other_spaces %}
			        {% for space in other_spaces %}
						<a href="/{{ space.uid }}" class="list-space_item {% if space.status == 2 %}list-space_item--archive{% endif %}">{{ space.name }}<i class="fa fa-sign-in"></i></a>
			        {% endfor %}
			    {% else %}
					Brak
				{% endif %}
			</div>
	    </div>
		<div class="view-space_channels">
			<h2>Kanały</h2>
			<div class="list-space">
			    {% if own_channels %}
			        {% for space in own_channels %}
						<a href="/{{ space.uid }}" class="list-space_item {% if space.status == 2 %}list-space_item--archive{% endif %}">{{ space.name }}</a>
			        {% endfor %}
			    {% else %}
					Brak
				{% endif %}
			</div>
			<div class="list-space list-space--other">
				{% if other_channels %}
			        {% for space in other_channels %}
						<a href="/{{ space.uid }}" class="list-space_item {% if space.status == 2 %}list-space_item--archive{% endif %}">{{ space.name }}<i class="fa fa-sign-in"></i></a>
			        {% endfor %}
			    {% else %}
					Brak
				{% endif %}
			</div>
		</div>
	</div>
	<div class="popup-bg"></div>
	<div class="popup" id="popupEditSpace">
		<button class="popup_btn-close">Zamknij</button>
		<h2>Edytuj przestrzeń</h2>
		<div id="editForm">
			{% include "forms/form_edit_space.html" %}
		</div>
	</div>
	<script src="/static/js/space.js"></script>
{% endblock %}