{% extends "base.html" %}

{% block core %}

    {% include "views/view_space.html" %}

    <div class="popup-bg"></div>
    <div class="popup" id="popupEditSpace"">
        <button class="popup_btn-close">Zamknij</button>
        <h2>Edytuj przestrzeń</h2>
        <div id="editForm">
            {% include "forms/form_edit_space.html" %}
        </div>
    </div>
    <div class="popup" id="popupNewSpace">
        <button class="popup_btn-close">Zamknij</button>
        <h2>Dodaj przestrzeń</h2>
        <div id="newSpaceForm">
            {% include "forms/form_new_space.html" %}
        </div>
    </div>
    <div class="popup" id="popupAddCollaborators">
        <button class="popup_btn-close">Zamknij</button>
        <h2>Dodaj użytkowników</h2>
        <div id="addCollaboratorsForm">
            {% include "forms/form_add_collaborators.html" %}
        </div>
    </div>

    <div class="popup" id="popupEditRights" style="width:1350px;">
        <button class="popup_btn-close">Zamknij</button>
        <h2>Edytuj prawa użytkowników</h2>
        <div id="editRightsForm">
            {% include "forms/form_edit_rights.html" %}
        </div>
    </div>

    <div style="display: none;" class="communicator" data-port="{{ user_key }}" data-username="{{ user.username }}"
         data-wsaddress="{{ websocket_server_address }}">
        <div id="communicator_users" class="communicator_users">
            <div class="user-avatar" style="width: 35px; background: rgb(247, 123, 239); display: none;">
                <strong>a</strong></div>
            <div class="user-avatar" style="width: 35px; background: rgb(247, 123, 239); display: none;">
                <strong>a</strong></div>
            <div class="user-avatar" style="width: 35px; background: rgb(247, 123, 239); display: none;">
                <strong>a</strong></div>
            <div class="user-avatar" style="width: 35px; background: rgb(247, 123, 239); display: none;">
                <strong>a</strong></div>
            <div class="user-avatar" style="width: 35px; background: rgb(247, 123, 239); display: none;">
                <strong>a</strong></div>
            <div class="user-avatar" style="width: 35px; background: rgb(247, 123, 239); display: none;">
                <strong>a</strong></div>
            <div class="user-avatar" style="width: 35px; background: rgb(247, 123, 239); display: none;">
                <strong>a</strong></div>
            <div class="user-avatar" style="width: 35px; background: rgb(247, 123, 239); display: none;">
                <strong>a</strong></div>
        </div>
        <div class="communicator_head">
            <div id="conv-name"
                 style="float:left; width: 200px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; text-align: left;"></div>
            <button id="add_btn" class="communicator_btn-add"><i class="fa fa-user-plus"></i></button>
            <button id="close_btn" class="communicator_btn-close"><i class="fa fa-times"></i></button>
            <form id="add_to_conversation" style="display: none;border: 0; background: none;">
                <input type="text" name="users" autocomplete="off" style="height: 20px; width:200px; padding: 2px; border: 1px solid rgba(0, 0, 0, 0.3);" pattern="(.+;)*([^;]+){1}$" required>
                <input type="submit" value="Dodaj" style="background: #a39b76; border: 0 none; font-size: 12px; height: 26px; line-height: 26px;">
            </form>
        </div>
        <ul class="communicator_list">
        </ul>
        <form id="sendChat">
            <input type="text" autocomplete="off" id="chatInput">
            <input type="submit" class="btn" value="Wyślij">
        </form>
    </div>
    <div class="users-list">
        <div class="users-list_head">Użytkownicy</div>
        <ul id="users_list">
        </ul>
        <div class="users-list_head">Konwersacje grupowe</div>
        <ul id="group_conv_list">
            <li><a href="" class="users-list_item">Bartek, Michał, Jakub, Łukasz, Lucjan</a></li>
        </ul>
    </div>
    <script src="/static/js/websocket.js"></script>
    <script src="/static/js/space.js"></script>
{% endblock %}
